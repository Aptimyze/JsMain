<?php
class NEWJS_VISHWAS_SEAL extends TABLE{
       

        /**
         * @fn __construct
         * @brief Constructor function
         * @param $dbName - Database to which the connection would be made
         */

        public function __construct($dbname="")
        {
			parent::__construct($dbname);
        }
	public function getVishwasSeal($pid)
	{
		try
		{
			$res=null;
			if($pid)
			{
				$sql="SELECT PROFILEID FROM newjs.VISHWAS_SEAL WHERE PROFILEID=:PROFILEID";
				$prep=$this->db->prepare($sql);
				$prep->bindValue(":PROFILEID",$pid,PDO::PARAM_INT);
				$prep->execute();
				if($result = $prep->fetch(PDO::FETCH_ASSOC))
				{
					$res=$result;
				}
				
			}
			else
				throw new jsException("No searchid present in sphnix search cache");
				
			return $res;
			
		}
		catch(PDOException $e)
		{
			/*** echo the sql statement and error message ***/
			throw new jsException($e);
		}
	}
	public function getSR_CACHE($searchid,$sphinxJCACHE,$Sort)
	{
		try
		{
			$res=null;
			if($searchid)
			{
				$sql="SELECT RESULTS FROM newjs.SPHINX_SEARCHRESULTS_CACHE WHERE SID=:SEARCHID AND PAGE_START_ID=:sphinxJCACHE AND SORT_TYPE=:SORT";
				$prep=$this->db->prepare($sql);
				$prep->bindValue(":SEARCHID",$searchid,PDO::PARAM_INT);
				$prep->bindValue(":sphinxJCACHE",$sphinxJCACHE,PDO::PARAM_INT);
				$prep->bindValue(":SORT",$Sort,PDO::PARAM_STR);
				$prep->execute();
				if($result = $prep->fetch(PDO::FETCH_ASSOC))
				{
					$res=$result;
				}
				
			}
			else
				throw new jsException("No searchid present in sphnix search cache");
				
			return $res;
			
		}
		catch(PDOException $e)
		{
			/*** echo the sql statement and error message ***/
			throw new jsException($e);
		}
	} 
		
		
}
?>
