use newjs;

DELIMITER |
CREATE TRIGGER VIEW_LOG_TRIGGER_I AFTER INSERT ON VIEW_LOG
FOR EACH ROW
BEGIN
INSERT IGNORE INTO test.VIEW_LOG_ACTIVE values(NEW.VIEWER,NEW.VIEWED,NEW.DATE,NEW.VIEWED_MMM);
END; |


CREATE TRIGGER VIEW_LOG_TRIGGER_U AFTER UPDATE ON VIEW_LOG
FOR EACH ROW
BEGIN
REPLACE INTO test.VIEW_LOG_ACTIVE values(NEW.VIEWER,NEW.VIEWED,NEW.DATE,NEW.VIEWED_MMM);
END; |

CREATE TRIGGER VIEW_LOG_TRIGGER_D AFTER DELETE ON VIEW_LOG
FOR EACH ROW
BEGIN
DELETE FROM test.VIEW_LOG_ACTIVE WHERE VIEWER=OLD.VIEWER AND VIEWED=OLD.VIEWED;
END; |

DELIMITER ;

