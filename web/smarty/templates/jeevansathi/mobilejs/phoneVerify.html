<!DOCTYPE HTML>
<html>
<head>
<title>Jeevan Sathi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="~$IMG_URL`/min/?f=/profile/css/~$jsmbPhoneVerifyStyle_css`,/profile/css/~$media_css`" rel="stylesheet" type="text/css">
<link href="~$IMG_URL`/min/?f=/profile/css/~$mobilejs_css`,/css/~$mobile_media_css`,/css/~$mobilejs_revamp`,/css/~$mobile_hamburger_css`" rel="stylesheet" type="text/css" />
<!-- Stylesheet end-->
<link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">

<script type = "text/javascript" src = "~$JQUERY_JS`"></script>
<script src="~$IMG_URL`/min/?f=/js/html5_js.js,/js/~$mobHamburger_js`"></script>
</head>
<body>
<div id="main">

	~$LEFT_SLIDER`
<div id="maincomponent">
		~$HEADER`
<div id="mainpart">
	<!-- Sub Title -->
	<section class="s-info-bar">
		<div class="pgwrapper">
			Phone verification is mandatory to use Jeevansathi.com
		</div>
	</section>
	
	<!-- Confirmation -->
	<section>
		<div class="pgwrapper">
			<div class="js-content">

				<div  id = "singleNumber" style="display:none">
					To verify your phone number give a ~if $showMissed eq 'Y'`missed~/if` call to <a href="tel:~$VIRTUAL_NUMBER`"><strong class="fc-br">~$VIRTUAL_NUMBER`</strong></a> from the number shown below:
				</div>
				<div id = "multipleNumbers" style="display:block">
					To verify your phone number give a ~if $showMissed eq 'Y'`missed~/if` call to <a href="tel:~$VIRTUAL_NUMBER`"><strong class="fc-br">~$VIRTUAL_NUMBER`</strong></a> from any one of the numbers shown below:
				</div>
				<br/>
				<table width="100%" border="0" cellpadding="0" cellspacing="0">
<form id="phoneForm" method="post" name="phoneForm" action="~$SITE_URL`/jsmb/phoneVerify.php">
<input type="hidden" id="mobile" value="~$MOBILE`" name="mobile">
<input type="hidden" id="landline" value="~$LANDLINE`" name="landline">
<input type="hidden" id="alternate" value="~$ALTERNATE`" name="alternate">

<input type="hidden" id="mobile_valid" value="~$MOBILE_VALID`" name="mobile_valid">
<input type="hidden" id="landline_valid" name='landline_valid' value="~$LANDLINE_VALID`">
<input type="hidden" id="alternate_valid" name="alternate_valid" value="~$ALTERNATE_VALID`">
<input type="hidden" id="multiple_numbers" name="multipleNumbers" value="~$multipleNumbers`">

<input type="hidden" id="std" name="std" value="~$STD`">
<input type="hidden" id="ISD" name="ISD" value="~$ISD`">
<input type='hidden' name='mobilePost' value='1'>
<input type='hidden' name='type' id="phoneType" value=''>
					<tr>
						<td class="verticalAlignMiddle" align="left"><span class="pr15">+~$ISD`</span></td>
						<td class="verticalAlignMiddle" width="70%" align="left">
							<span id="mobInput" style="display:none;"><input name="mobNew" id="mobNew" type="text" value='~$MOBILE`'/></span>
							<span id="mobText" name="mobText" style="display:block;">~$MOBILE`</span>
						</td>
						<td class="verticalAlignMiddle" width="22%" align="left">
							<a id="mobEdit" href="#" class="pl15" style="display:block;">Edit</a>
							<a id="mobSave" href="#" class="pl15" style="display:none;">Save</a>
						</td> 
					</tr>
					<tr id="mobError" style="color:red;display:none;">
						<td></td>
						<td>Please enter valid number</td>
					<tr/>
					<tr>
						<td colspan="3">&nbsp;</td>
					</tr>
					<tr>
						<td class="verticalAlignMiddle" align="left"><span class="pr15">+~$ISD`</span></td>
						<td class="verticalAlignMiddle" align="left">
							<span id="altInput" style="display:none;"><input id="altNew" name="altNew" type="text" value='~$ALTERNATE`'/></span>
							<span id="altText" style="display:block;" name="altText">~$ALTERNATE`</span>
						</td>
						<td class="verticalAlignMiddle" align="left">
							<a id="altEdit" href="#" class="pl15" style="display:block;">Edit</a>
							<a id="altSave" href="#" class="pl15" style="display:none;">Save</a>
						</td> 
					</tr>
					<tr id="altError" style="color:red;display:none;">
						<td></td>
						<td>Please enter valid number</td>
					<tr/>
					<tr>
						<td colspan="3">&nbsp;</td>
					</tr>
					<tr>
						<td class="verticalAlignMiddle" align="left"><span class="pr15">+~$ISD`</span></td>
						<td class="verticalAlignMiddle" align="left">
							<span id="landlInput" style="display:none;"><input id="stdNew" type="text" name="stdNew" value='~$STD`' style="width:25%;display:inline-block" class="pull-left" />&nbsp; &nbsp;<input name="landlNew" id="landlNew" value='~$LANDLINE`' type="text" style="width:68%;display:inline-block" class="pull-right" /></span>
							<span id="landlText" name="landlText" style="display:block;">~$STD` ~$LANDLINE`</span>
						</td>
						<td align="left" class="verticalAlignMiddle">
							<a id="landlEdit" href="#" class="pl15" style="display:block;">Edit</a>
							<a id="landlSave" href="#" class="pl15" style="display:none;">Save</a>
						</td> 
					</tr>
					<tr id="landlError" style="color:red;display:none;">
						<td></td>
						<td>Please enter valid number</td>
					<tr/>
			</form>
				</table>
				<br />
				<div class="frm-container">
					<div class="row03"><div style="width:100%"><input type="button" onclick="location.href='tel:~$VIRTUAL_NUMBER`';" value="Call" style="color:#333;" class="normal-btn w100" /></div></div>
				</div>
				<div class="frm-container">
					<div class="row03"><div style="width:100%"><input type="button" style="color:#333;white-space:normal;" onClick="window.location.reload();" value="Confirm verification after giving missed call" class="normal-btn w100" /></div></div>
				</div>
				<p>Or call customer service at <a href="tel:18004196299"><span class="fc-b">18004196299</span></a></p>
				<br />
			</div>
		</div> 
	</section>
	</div>	
		~$FOOTER`
	</div>
	~$RIGHT_SLIDER`
</div>
</body>
</html>
<script>
$(document).ready(function() {
	var limit, std, isd, mobile, landline, alternate, mobileValid, landlineValid, alternateValid,mobPattern,landlPattern,stdPattern,landlPattern;
	setVariables();
	setHeadLine();
        setInputTextproperty();
});
function setVariables()
{
        limit=0;
        isd = $("#ISD").val();
        std = $("#std").val();
        mobile = $("#mobile").val();
        landline = $("#landline").val();
        alternate = $("#alternate").val();
	mobileValid = $('#mobile_valid').val();
	landlineValid = $('#landline_valid').val();
	alternateValid = $('#alternate_valid').val();
        multipleNumbers = $("#multiple_numbers").val();
	if(isd=="91")
		mobPattern=/^([7-9]{1}[0-9]{9})$/;
	else
		mobPattern=/^([1-9]{1}[0-9]{7,9})$/;
	stdPattern=/^([0-9]{2,})$/;
        landlPattern=/^([2-6]{1}[0-9]{4,})$/;

}
function setHeadLine()
{
        if(multipleNumbers=='N')
        {
                $("#singleNumber").toggle();
                $("#multipleNumbers").toggle();
        }
}
function setInputTextproperty()
{
	if(mobileValid=='Y')
		showEdit("mob");
	else
		showSave("mob");
	if(landlineValid=='Y')
		showEdit("landl");
	else
		showSave("landl");
	if(alternateValid=='Y')
		showEdit("alt");
	else
		showSave("alt");
}
function showEdit(id)
{
	$("#"+id+"Error").hide();
	$("#"+id+"Text").show();
	$("#"+id+"Input").hide();
	$("#"+id+"Edit").show();
	$("#"+id+"Save").hide();
}
function showSave(id)
{
	$("#"+id+"Input").show();
	$("#"+id+"Text").hide();
	$("#"+id+"Edit").hide();
	$("#"+id+"Save").show();
}
$('#mobEdit').click(function(){
	settingOnEditClick('mob');
});
$('#landlEdit').click(function(){
	settingOnEditClick('landl');
});
$('#altEdit').click(function(){
	settingOnEditClick('alt');
});
function settingOnEditClick(id)
{
	showSave(id);
	return false;
}
$('#mobSave').click(function(){
	settingOnSaveClick('mob');
});
$('#landlSave').click(function(){
	settingOnSaveClick('landl');
});
$('#altSave').click(function(){
	settingOnSaveClick('alt');
});
function settingOnSaveClick(id)
{
	same = checkSame(id);
	valid = checkValidNumber(id);
	if(valid)
	{
		if(id=="mob")
		{
			mobileValid='Y';
			mobile=$("#"+id+"New").val();
			$("#"+id+"Text").html($("#"+id+"New").val());
		}
		if(id=="alt")
		{
			alternateValid='Y';
			alternate=$("#"+id+"New").val();
			$("#"+id+"Text").html($("#"+id+"New").val());
		}
		if(id=="landl")
		{
			landlineValid='Y';
			std=$("#stdNew").val();
			$("#"+id+"Text").html($("#stdNew").val()+" "+$("#"+id+"New").val());
		}
		showEdit(id);
		if(!same)
			saveNumber(id);
	}
	else
	{
		showError(id);
		return false;
	}
}
function checkSame(id)
{
	if(id=="mob")
		previousNumber=mobile;
	if(id=="alt")
		previousNumber=alternate;
	if(id=="landl")
	{
		if(std!=$("#stdNew").val())
			return false;
		previousNumber=landline;	
	}
	if(previousNumber==$("#"+id+"New").val())
		return true;
	return false;
}
function saveNumber(id)
{
        var request;
	$("#phoneType").val(id);
	number =$("#"+id+"New").val();
        var $form = $("#phoneForm").submit();
       /* var $inputs = $form.find("input");
        $inputs.prop("disabled", true);
        request = $.post(
        "~$SITE_URL`/profile/myjs_verify_phoneno.php",data
        ).done(function(result){
		if(result)
		{
			resArr    =new Array();
			resArr    =result.split("|");
			if(resArr[1]=="INVALID")
			{
				if(resArr[0]=='M')
					id="mob";
				if(resArr[0]=='L')
					id="landl";
				if(resArr[0]=='A')
					id="alt";
				showSave(id);
				showError(id);
			}
		}
        });*/

}
function showError(id)
{
	hideAllErrors();
	$("#"+id+"Error").show();
}
function hideAllErrors()
{
	$("[id$='Error']").hide();
}
function checkValidNumber(id)
{
	
	if(id=="mob" || id=="alt")
	{
		if(mobPattern.test($("#"+id+"New").val())==false)  //||( mobileValid=="N"
			return false;
	}
	else
	{
		if(stdPattern.test($("#stdNew").val())==false || landlPattern.test($("#"+id+"New").val())==false)  //||( mobileValid=="N"
			return false;
	}
	return true;
}
~$pixelcode`
</script>
